<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>init.el for Noah Hoffman</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="title" content="init.el for Noah Hoffman"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2013-02-04T11:52-0800"/>
<meta name="author" content="Noah Hoffman"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  {margin-left:auto; margin-right:0px;  text-align:right;}
  .left   {margin-left:0px;  margin-right:auto; text-align:left;}
  .center {margin-left:auto; margin-right:auto; text-align:center;}
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top;  }
  th.right  { text-align:center;  }
  th.left   { text-align:center;   }
  th.center { text-align:center; }
  td.right  { text-align:right;  }
  td.left   { text-align:left;   }
  td.center { text-align:center; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  div.inlinetask {
    padding:10px;
    border:2px solid gray;
    margin:10px;
    background: #ffffcc;
  }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="./worg.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>

</head>
<body>

<div id="preamble">

</div>

<div id="content">
<h1 class="title">init.el for Noah Hoffman</h1>


<ul>
<li>The source for this page is available at <a href="https://github.com/nhoffman/.emacs.d">https://github.com/nhoffman/.emacs.d</a>
</li>
<li>The html-exported version of this page is hosted at <a href="http://nhoffman.github.com/.emacs.d">http://nhoffman.github.com/.emacs.d</a>
</li>
</ul>





<pre class="src src-elisp">(message <span style="color: #8b2252;">"loading ~/.emacs.d/init.el"</span>)
</pre>



<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 License</a></li>
<li><a href="#sec-2">2 Using this file</a></li>
<li><a href="#sec-3">3 ELPA</a></li>
<li><a href="#sec-4">4 Various aliases and key bindings</a></li>
<li><a href="#sec-5">5 Startup and general appearance</a></li>
<li><a href="#sec-6">6 Exiting and saving</a></li>
<li><a href="#sec-7">7 Platform and display-specific settings</a></li>
<li><a href="#sec-8">8 Scrolling</a></li>
<li><a href="#sec-9">9 Marking</a></li>
<li><a href="#sec-10">10 Cursor Appearance.</a></li>
<li><a href="#sec-11">11 iswitchb mode</a></li>
<li><a href="#sec-12">12 Keyboard macros</a></li>
<li><a href="#sec-13">13 emacs desktop</a></li>
<li><a href="#sec-14">14 Move lines up and down with arrow keys</a></li>
<li><a href="#sec-15">15 Buffers and windows</a>
<ul>
<li><a href="#sec-15-1">15.1 Switch windows with arrow keys</a></li>
<li><a href="#sec-15-2">15.2 Transpose buffers</a></li>
<li><a href="#sec-15-3">15.3 Switch buffers between frames</a></li>
</ul>
</li>
<li><a href="#sec-16">16 spelling</a></li>
<li><a href="#sec-17">17 pine/alpine</a></li>
<li><a href="#sec-18">18 general load path</a></li>
<li><a href="#sec-19">19 LaTeX</a></li>
<li><a href="#sec-20">20 ESS</a></li>
<li><a href="#sec-21">21 org-mode</a>
<ul>
<li><a href="#sec-21-1">21.1 pygments</a></li>
<li><a href="#sec-21-2">21.2 org-mode utilities</a></li>
</ul>
</li>
<li><a href="#sec-22">22 markdown</a></li>
<li><a href="#sec-23">23 chrome "edit with emacs"</a></li>
<li><a href="#sec-24">24 Python</a></li>
<li><a href="#sec-25">25 python-pylint</a></li>
<li><a href="#sec-26">26 text-mode</a></li>
<li><a href="#sec-27">27 rst-mode</a></li>
<li><a href="#sec-28">28 tramp</a></li>
<li><a href="#sec-29">29 ibuffer</a></li>
<li><a href="#sec-30">30 dired</a></li>
<li><a href="#sec-31">31 uniquify</a></li>
<li><a href="#sec-32">32 ido-mode</a></li>
<li><a href="#sec-33">33 git/magit</a></li>
<li><a href="#sec-34">34 sql support</a></li>
<li><a href="#sec-35">35 gpg</a></li>
<li><a href="#sec-36">36 wc</a></li>
<li><a href="#sec-37">37 Misc utilities</a>
<ul>
<li><a href="#sec-37-1">37.1 copy-buffer-file-name</a></li>
<li><a href="#sec-37-2">37.2 copy-and-comment</a></li>
<li><a href="#sec-37-3">37.3 get-buffer-file-name</a></li>
<li><a href="#sec-37-4">37.4 unfill-paragraph</a></li>
</ul>
</li>
<li><a href="#sec-38">38 emacsclient</a></li>
<li><a href="#sec-39">39 added by emacs</a></li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> License</h2>
<div class="outline-text-2" id="text-1">




<pre class="src src-elisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">This program is free software: you can redistribute it and/or modify</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">it under the terms of the GNU General Public License as published by</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">the Free Software Foundation, either version 3 of the License, or</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(at your option) any later version.</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">This program is distributed in the hope that it will be useful,</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">GNU General Public License for more details.</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">You should have received a copy of the GNU General Public License</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">along with this program.  If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>
</pre>


</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Using this file</h2>
<div class="outline-text-2" id="text-2">


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup><col class="left" /><col class="left" />
</colgroup>
<tbody>
<tr><td class="left">C-c i</td><td class="left">markup paragraph at point as a code block</td></tr>
<tr><td class="left">C-c C-v t</td><td class="left">tangle this file</td></tr>
</tbody>
</table>





<pre class="src src-elisp">(setq init-file-name <span style="color: #8b2252;">"init.el"</span>)
(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">init-insert-code-block</span> ()
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Insert a code block that will be tangled into `init-file-name`</span>
  (interactive)
  (backward-paragraph)
  (insert (format <span style="color: #8b2252;">"#+BEGIN_SRC elisp :tangle %s"</span> init-file-name))
  (forward-paragraph)
  (insert <span style="color: #8b2252;">"#+END_SRC\n"</span>))
(global-set-key (kbd <span style="color: #8b2252;">"C-c i"</span>) 'init-insert-code-block)
</pre>


<p>
Convenience function to (re)load init.el
</p>



<pre class="src src-elisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">init-load</span> ()
  <span style="color: #8b2252;">"Load ~/.emacs.d/init.el"</span>
  (interactive)
  (load <span style="color: #8b2252;">"~/.emacs.d/init.el"</span>))
(global-set-key (kbd <span style="color: #8b2252;">"M-C-i"</span>) 'init-load)
</pre>


<p>
Tangle and export html
</p>



<pre class="src src-elisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">init-compile</span> ()
  <span style="color: #8b2252;">"Tangle init.org and export html"</span>
  (interactive)
  (org-babel-tangle)
  (org-export-as-html 3)
  (copy-file <span style="color: #8b2252;">"init.html"</span> <span style="color: #8b2252;">"../.emacs.d.ghpages/index.html"</span> t)
  )
</pre>


<p>
Set up ghpages clone
</p>



<pre class="example">git clone git@github.com:nhoffman/.emacs.d.git .emacs.d.ghpages
cd .emacs.d.ghpages
git checkout gh-pages
</pre>


</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> ELPA</h2>
<div class="outline-text-2" id="text-3">


<p>
Set up and initialize ELPA package manager.
</p>
<p>
Some useful ELPA variables and functions:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup><col class="left" /><col class="left" />
</colgroup>
<tbody>
<tr><td class="left">M-x package-list-packages</td><td class="left">open list of packages</td></tr>
<tr><td class="left">package-activated-list</td><td class="left">variable containing list of the names of currently activated packages</td></tr>
<tr><td class="left">package-install</td><td class="left">install a package</td></tr>
<tr><td class="left">package-installed-p</td><td class="left">return true if package is installed</td></tr>
</tbody>
</table>


<p>
Add some extra package repositories. The default value of package-archives is
<code>(("gnu" . "http://elpa.gnu.org/packages/"))</code>
</p>



<pre class="src src-elisp">(<span style="color: #a020f0;">when</span> (&gt;= emacs-major-version 24)
  (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">package</span>)
  (package-initialize)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Original Emacs Lisp Package Archive</span>
  (add-to-list 'package-archives
       '(<span style="color: #8b2252;">"elpa"</span> . <span style="color: #8b2252;">"http://tromey.com/elpa/"</span>) t)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">User-contributed repository</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Marmalade is for packages that cannot be uploaded to s official ELPA repository.</span>
  (add-to-list 'package-archives
       '(<span style="color: #8b2252;">"marmalade"</span> . <span style="color: #8b2252;">"http://marmalade-repo.org/packages/"</span>) t)
  (add-to-list 'package-archives
       '(<span style="color: #8b2252;">"melpa"</span> . <span style="color: #8b2252;">"http://melpa.milkbox.net/packages/"</span>) t)
  (add-to-list 'package-archives
       '(<span style="color: #8b2252;">"org"</span> . <span style="color: #8b2252;">"http://orgmode.org/elpa/"</span>) t)
  )
</pre>


<p>
I didn't see any obvious way to configure which packages to install,
so here are some functions to do so. Call
'package-install-my-packages' interactively to install any missing
packages. It seems to be necessary to run 'M-x package-list-packages'
first.
</p>



<pre class="src src-elisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">package-installed-not-builtin-p</span> (package <span style="color: #228b22;">&amp;optional</span> min-version)
  <span style="color: #8b2252;">"Return true if PACKAGE, of MIN-VERSION or newer, is installed, ignoring built in packages.</span>
<span style="color: #8b2252;">MIN-VERSION should be a version list."</span>
  (<span style="color: #a020f0;">let</span> ((pkg-desc (assq package package-alist)))
    (<span style="color: #a020f0;">if</span> pkg-desc
        (version-list-&lt;= min-version
                         (package-desc-vers (cdr pkg-desc))))))

(<span style="color: #a020f0;">defvar</span> <span style="color: #a0522d;">package-my-package-list</span>
  '(
auctex
edit-server
ess
gist
htmlize
magit
markdown-mode
moinmoin-mode
org
python-pylint
rainbow-delimiters
))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">package-install-list</span> (package-list)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Install each package named in "package-list" using elpa if not</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">already installed.</span>
  (<span style="color: #a020f0;">while</span> package-list
    (setq pkg (car package-list))
    (<span style="color: #a020f0;">unless</span> (package-installed-not-builtin-p pkg)
      (<span style="color: #a020f0;">cond</span> ((yes-or-no-p (format <span style="color: #8b2252;">"Install %s? "</span> pkg))
             (package-install pkg))))
    (setq package-list (cdr package-list)))
  (message <span style="color: #8b2252;">"done installing packages."</span>)
)

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">package-install-my-packages</span> ()
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Interactively installs packages listed in global 'package-my-package-list'</span>
  (interactive)
  (package-install-list package-my-package-list))
</pre>


</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Various aliases and key bindings</h2>
<div class="outline-text-2" id="text-4">





<pre class="src src-elisp">(<span style="color: #a020f0;">defalias</span> '<span style="color: #0000ff;">dtw</span> 'delete-trailing-whitespace)
</pre>


<p>
Function keys
</p>



<pre class="src src-elisp">(global-set-key (kbd <span style="color: #8b2252;">"&lt;f6&gt;"</span>) 'linum-mode)
(global-set-key (kbd <span style="color: #8b2252;">"&lt;f7&gt;"</span>) 'visual-line-mode)
(global-set-key (kbd <span style="color: #8b2252;">"&lt;f8&gt;"</span>) 'ns-toggle-fullscreen)
</pre>


</div>

</div>

<div id="outline-container-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Startup and general appearance</h2>
<div class="outline-text-2" id="text-5">


<p>
Enable debugging
</p>



<pre class="src src-elisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq debug-on-error t)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq debug-on-signal t)</span>

</pre>


<p>
Startup appearance.
</p>



<pre class="src src-elisp">(setq column-number-mode t)
(setq inhibit-splash-screen t)
(setq require-final-newline t)
(setq make-backup-files nil) <span style="color: #b22222;">;; </span><span style="color: #b22222;">no backup files</span>
(setq initial-scratch-message nil) <span style="color: #b22222;">;; </span><span style="color: #b22222;">no instructions in the *scratch* buffer</span>
(setq suggest-key-bindings 4)
(show-paren-mode 1)
</pre>


<p>
Date and time in status bar. See <a href="http://efod.se/writings/linuxbook/html/date-and-time.html">http://efod.se/writings/linuxbook/html/date-and-time.html</a>
</p>



<pre class="src src-elisp">(setq display-time-day-and-date t
      display-time-24hr-format t)
(display-time)
</pre>


<p>
File path in title bar. See <a href="http://stackoverflow.com/questions/3669511/the-function-to-show-current-files-full-path-in-mini-buffer">http://stackoverflow.com/questions/3669511/the-function-to-show-current-files-full-path-in-mini-buffer</a>
</p>



<pre class="src src-elisp">(setq frame-title-format
      (list (format <span style="color: #8b2252;">"%s %%S: %%j "</span> (system-name))
        '(buffer-file-name <span style="color: #8b2252;">"%f"</span> (dired-directory dired-directory <span style="color: #8b2252;">"%b"</span>))))
</pre>


<p>
automatically refresh buffers from disk (default is every 5 sec)
see <a href="http://www.cs.cmu.edu/cgi-bin/info2www?(emacs)">http://www.cs.cmu.edu/cgi-bin/info2www?(emacs)</a>Reverting
</p>



<pre class="src src-elisp">(global-auto-revert-mode 1)
</pre>


</div>

</div>

<div id="outline-container-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Exiting and saving</h2>
<div class="outline-text-2" id="text-6">


<p>
Require prompt before exit on C-x C-c
</p><ul>
<li><a href="http://www.dotemacs.de/dotfiles/KilianAFoth.emacs.html">http://www.dotemacs.de/dotfiles/KilianAFoth.emacs.html</a>
</li>
</ul>





<pre class="src src-elisp">(global-set-key [(control x) (control c)]
                (function
                 (<span style="color: #a020f0;">lambda</span> () (interactive)
                   (<span style="color: #a020f0;">cond</span> ((y-or-n-p <span style="color: #8b2252;">"Quit? (save-buffers-kill-terminal) "</span>)
                          (save-buffers-kill-terminal))))))
</pre>


<p>
Delete trailing whitespace before save.
</p>



<pre class="src src-elisp">(add-hook 'before-save-hook 'delete-trailing-whitespace)
</pre>


</div>

</div>

<div id="outline-container-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> Platform and display-specific settings</h2>
<div class="outline-text-2" id="text-7">


<p>
Detect platform and window system and set up fonts accordingly
</p>


<pre class="src src-elisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">fix-frame</span> ()
  (interactive)
  (menu-bar-mode -1) <span style="color: #b22222;">;; </span><span style="color: #b22222;">hide menu bar</span>
  (tool-bar-mode -1) <span style="color: #b22222;">;; </span><span style="color: #b22222;">hide tool bar</span>
  (<span style="color: #a020f0;">cond</span> ((string= <span style="color: #8b2252;">"ns"</span> window-system) <span style="color: #b22222;">;; </span><span style="color: #b22222;">cocoa</span>
         (<span style="color: #a020f0;">progn</span> (message (format <span style="color: #8b2252;">"** running %s windowing system"</span> window-system))
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">key bindings for mac - see</span>
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">http://stuff-things.net/2009/01/06/emacs-on-the-mac/</span>
         <span style="color: #b22222;">;; </span><span style="color: #b22222;">http://osx.iusethis.com/app/carbonemacspackage</span>
         (set-keyboard-coding-system 'mac-roman)
         (setq mac-option-modifier 'meta)
         (setq mac-command-key-is-meta nil)
         (setq my-default-font <span style="color: #8b2252;">"Bitstream Vera Sans Mono-14"</span>)
         ))
        ((string= <span style="color: #8b2252;">"x"</span> window-system)
         (<span style="color: #a020f0;">progn</span>
           (message (format <span style="color: #8b2252;">"** running %s windowing system"</span> window-system))
           (setq my-default-font <span style="color: #8b2252;">"Liberation Mono-10"</span>)
           <span style="color: #b22222;">;; </span><span style="color: #b22222;">M-w or C-w copies to system clipboard</span>
           <span style="color: #b22222;">;; </span><span style="color: #b22222;">see http://www.gnu.org/software/emacs/elisp/html_node/Window-System-Selections.html</span>
           (setq x-select-enable-clipboard t)
           <span style="color: #b22222;">;; </span><span style="color: #b22222;">(set-scroll-bar-mode -1) ;; hide scroll bar</span>
           (scroll-bar-mode -1) <span style="color: #b22222;">;; </span><span style="color: #b22222;">hide scroll bar</span>
           ))
        (t
         (<span style="color: #a020f0;">progn</span>
         (message <span style="color: #8b2252;">"** running unknown windowing system"</span>)
         (setq my-default-font nil)
         (scroll-bar-mode -1) <span style="color: #b22222;">;; </span><span style="color: #b22222;">hide scroll bar</span>
         ))
        )

  (<span style="color: #a020f0;">unless</span> (equal window-system nil)
    (message (format <span style="color: #8b2252;">"** setting default font to %s"</span> my-default-font))
    (<span style="color: #a020f0;">condition-case</span> nil
        (set-default-font my-default-font)
      (<span style="color: #ff0000; font-weight: bold;">error</span> (message (format <span style="color: #8b2252;">"** could not set to font %s"</span> my-default-font))))
    )
  )

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">font-dejavu</span> ()
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">set default font to dejavu sans mono-11</span>
  (interactive)
  (set-default-font <span style="color: #8b2252;">"dejavu sans mono-11"</span>)
  )

</pre>


<p>
Apply above settings on startup
</p>



<pre class="src src-elisp">(fix-frame)
</pre>


<p>
&hellip;and when creating a new connection to emacs server via emacsclient
</p>
<p>
TODO - not sure why this doesn't seem to take effect on frame creation
</p>



<pre class="src src-elisp">(add-hook 'server-visit-hook 'fix-frame)
</pre>


</div>

</div>

<div id="outline-container-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> Scrolling</h2>
<div class="outline-text-2" id="text-8">


<p>
See <a href="http://www.emacswiki.org/emacs/SmoothScrolling">http://www.emacswiki.org/emacs/SmoothScrolling</a>
</p>



<pre class="src src-elisp">(setq mouse-wheel-scroll-amount '(3 ((shift) . 3))) <span style="color: #b22222;">;; </span><span style="color: #b22222;">number of lines at a time</span>
(setq mouse-wheel-progressive-speed nil) <span style="color: #b22222;">;; </span><span style="color: #b22222;">don't accelerate scrolling</span>
(setq mouse-wheel-follow-mosue 't) <span style="color: #b22222;">;; </span><span style="color: #b22222;">scroll window under mouse</span>
(setq scroll-step 1) <span style="color: #b22222;">;; </span><span style="color: #b22222;">keyboard scroll one line at a time</span>
(setq scroll-conservatively 1) <span style="color: #b22222;">;; </span><span style="color: #b22222;">scroll by one line to follow cursor off screen</span>
(setq scroll-margin 2) <span style="color: #b22222;">;; </span><span style="color: #b22222;">Start scrolling when 2 lines from top/bottom</span>
</pre>


</div>

</div>

<div id="outline-container-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> Marking</h2>
<div class="outline-text-2" id="text-9">





<pre class="src src-elisp">(transient-mark-mode 1) <span style="color: #b22222;">;; </span><span style="color: #b22222;">highlight active region - default in emacs 23.1+</span>
(global-set-key (kbd <span style="color: #8b2252;">"M-C-t"</span>) 'transient-mark-mode)
(global-set-key (kbd <span style="color: #8b2252;">"C-x C-b"</span>) 'electric-buffer-list)
</pre>


</div>

</div>

<div id="outline-container-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> Cursor Appearance.</h2>
<div class="outline-text-2" id="text-10">





<pre class="src src-elisp">(set-cursor-color <span style="color: #8b2252;">"red"</span>)
(blink-cursor-mode 1)
</pre>


</div>

</div>

<div id="outline-container-11" class="outline-2">
<h2 id="sec-11"><span class="section-number-2">11</span> iswitchb mode</h2>
<div class="outline-text-2" id="text-11">





<pre class="src src-elisp">(iswitchb-mode 1)
</pre>


</div>

</div>

<div id="outline-container-12" class="outline-2">
<h2 id="sec-12"><span class="section-number-2">12</span> Keyboard macros</h2>
<div class="outline-text-2" id="text-12">


<p>
See <a href="http://www.emacswiki.org/emacs/KeyboardMacros">http://www.emacswiki.org/emacs/KeyboardMacros</a>
note that default bindings for macros are:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup><col class="left" /><col class="left" />
</colgroup>
<tbody>
<tr><td class="left">C-x (</td><td class="left">start defining a keyboard macro</td></tr>
<tr><td class="left">C-x )</td><td class="left">stop defining the keyboard macro</td></tr>
<tr><td class="left">C-x e</td><td class="left">execute the keyboard macro</td></tr>
</tbody>
</table>


<p>
Some additional keyboard macro bindings.
</p>



<pre class="src src-elisp">(global-set-key (kbd <span style="color: #8b2252;">"&lt;f5&gt;"</span>) 'call-last-kbd-macro)
</pre>


</div>

</div>

<div id="outline-container-13" class="outline-2">
<h2 id="sec-13"><span class="section-number-2">13</span> emacs desktop</h2>
<div class="outline-text-2" id="text-13">


<p>
References:
</p><ul>
<li><a href="http://www.gnu.org/software/emacs/manual/html_node/emacs/Saving-Emacs-Sessions.html">http://www.gnu.org/software/emacs/manual/html_node/emacs/Saving-Emacs-Sessions.html</a>
</li>
<li><a href="http://www.emacswiki.org/emacs/DeskTop">http://www.emacswiki.org/emacs/DeskTop</a>
</li>
</ul>





<pre class="src src-elisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">desktop</span>)
</pre>


<p>
Save desktop periodically instead of just on exit, but not if emacs is
started with <code>--no-desktop</code>
</p>



<pre class="src src-elisp">(desktop-save-mode 1)
(<span style="color: #a020f0;">if</span> (and desktop-save-mode (not (member <span style="color: #8b2252;">"--no-desktop"</span> command-line-args)))
    (<span style="color: #a020f0;">progn</span>
      (message <span style="color: #8b2252;">"Enabling desktop auto-save"</span>)
      (add-hook 'auto-save-hook 'desktop-save-in-desktop-dir)))
</pre>


</div>

</div>

<div id="outline-container-14" class="outline-2">
<h2 id="sec-14"><span class="section-number-2">14</span> Move lines up and down with arrow keys</h2>
<div class="outline-text-2" id="text-14">


<p>
See <a href="http://stackoverflow.com/questions/2423834/move-line-region-up-and-down-in-emacs">http://stackoverflow.com/questions/2423834/move-line-region-up-and-down-in-emacs</a>
</p>
<p>
Move line up
</p>



<pre class="src src-elisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">move-line-up</span> ()
  (interactive)
  (transpose-lines 1)
  (previous-line 2))
(global-set-key (kbd <span style="color: #8b2252;">"M-&lt;up&gt;"</span>) 'move-line-up)
</pre>


<p>
Move line down.
</p>



<pre class="src src-elisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">move-line-down</span> ()
  (interactive)
  (next-line 1)
  (transpose-lines 1)
  (previous-line 1))
(global-set-key (kbd <span style="color: #8b2252;">"M-&lt;down&gt;"</span>) 'move-line-down)
</pre>


</div>

</div>

<div id="outline-container-15" class="outline-2">
<h2 id="sec-15"><span class="section-number-2">15</span> Buffers and windows</h2>
<div class="outline-text-2" id="text-15">



</div>

<div id="outline-container-15-1" class="outline-3">
<h3 id="sec-15-1"><span class="section-number-3">15.1</span> Switch windows with arrow keys</h3>
<div class="outline-text-3" id="text-15-1">


<p>
Note that other-window is bound by default to <code>C-x o</code>
</p>



<pre class="src src-elisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">back-window</span> ()
  (interactive)
  (other-window -1))
(global-set-key (kbd <span style="color: #8b2252;">"C-&lt;right&gt;"</span>) 'other-window)
(global-set-key (kbd <span style="color: #8b2252;">"C-&lt;left&gt;"</span>) 'back-window)
</pre>


</div>

</div>

<div id="outline-container-15-2" class="outline-3">
<h3 id="sec-15-2"><span class="section-number-3">15.2</span> Transpose buffers</h3>
<div class="outline-text-3" id="text-15-2">


<ul>
<li>see <a href="http://www.emacswiki.org/emacs/SwitchingBuffers">http://www.emacswiki.org/emacs/SwitchingBuffers</a>
</li>
<li>note that original code used function 'plusp', which seems not to be defined in recent versions of emacs
</li>
</ul>





<pre class="src src-elisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">transpose-buffers</span> (arg)
  <span style="color: #8b2252;">"Transpose the buffers shown in two windows."</span>
  (interactive <span style="color: #8b2252;">"p"</span>)
  (<span style="color: #a020f0;">let</span> ((selector (<span style="color: #a020f0;">if</span> (&gt;= arg 0) 'next-window 'previous-window)))
    (<span style="color: #a020f0;">while</span> (/= arg 0)
      (<span style="color: #a020f0;">let</span> ((this-win (window-buffer))
            (next-win (window-buffer (funcall selector))))
        (set-window-buffer (selected-window) next-win)
        (set-window-buffer (funcall selector) this-win)
        (select-window (funcall selector)))
      <span style="color: #b22222;">;; </span><span style="color: #b22222;">(setq arg (if (plusp arg) (1- arg) (1+ arg)))</span>
      (setq arg (<span style="color: #a020f0;">if</span> (&gt;= arg 0) (1- arg) (1+ arg)))
      )))
(global-set-key (kbd <span style="color: #8b2252;">"C-x 4"</span>) 'transpose-buffers)
</pre>


</div>

</div>

<div id="outline-container-15-3" class="outline-3">
<h3 id="sec-15-3"><span class="section-number-3">15.3</span> Switch buffers between frames</h3>
<div class="outline-text-3" id="text-15-3">


<p>
Also from <a href="http://www.emacswiki.org/emacs/SwitchingBuffers">http://www.emacswiki.org/emacs/SwitchingBuffers</a>
</p>



<pre class="src src-elisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">switch-buffers-between-frames</span> ()
  <span style="color: #8b2252;">"switch-buffers-between-frames switches the buffers between the two last frames"</span>
  (interactive)
  (<span style="color: #a020f0;">let</span> ((this-frame-buffer nil)
        (other-frame-buffer nil))
    (setq this-frame-buffer (car (frame-parameter nil 'buffer-list)))
    (other-frame 1)
    (setq other-frame-buffer (car (frame-parameter nil 'buffer-list)))
    (switch-to-buffer this-frame-buffer)
    (other-frame 1)
    (switch-to-buffer other-frame-buffer)))
(global-set-key (kbd <span style="color: #8b2252;">"C-x 5"</span>) 'switch-buffers-between-frames)
</pre>


</div>
</div>

</div>

<div id="outline-container-16" class="outline-2">
<h2 id="sec-16"><span class="section-number-2">16</span> spelling</h2>
<div class="outline-text-2" id="text-16">


<p>
Use aspell instead of ispell
</p>



<pre class="src src-elisp">(setq-default ispell-program-name <span style="color: #8b2252;">"aspell"</span>)
(setq ispell-dictionary <span style="color: #8b2252;">"en"</span>)
</pre>


<p>
Enable on-the-fly spell-check
</p>



<pre class="src src-elisp">(autoload 'flyspell-mode <span style="color: #8b2252;">"flyspell"</span> <span style="color: #8b2252;">"On-the-fly spelling checker."</span> t)
(setq flyspell-issue-welcome-flag nil) <span style="color: #b22222;">;; </span><span style="color: #b22222;">fix error message</span>
</pre>


</div>

</div>

<div id="outline-container-17" class="outline-2">
<h2 id="sec-17"><span class="section-number-2">17</span> pine/alpine</h2>
<div class="outline-text-2" id="text-17">


<p>
<a href="http://snarfed.org/space/emacs font-lock faces for composing email">http://snarfed.org/space/emacs%20font-lock%20faces%20for%20composing%20email</a>
</p>



<pre class="src src-elisp">(add-hook 'find-file-hooks
          '(<span style="color: #a020f0;">lambda</span> ()
             (<span style="color: #a020f0;">if</span> (equal <span style="color: #8b2252;">"pico."</span> (substring (buffer-name (current-buffer)) 0 5))
                 <span style="color: #b22222;">;; </span><span style="color: #b22222;">(message "** running hook for pine/alpine")</span>
                 (mail-mode))))
</pre>


</div>

</div>

<div id="outline-container-18" class="outline-2">
<h2 id="sec-18"><span class="section-number-2">18</span> general load path</h2>
<div class="outline-text-2" id="text-18">





<pre class="src src-elisp">(add-to-list 'load-path <span style="color: #8b2252;">"~/.emacs.d/"</span>)
</pre>


</div>

</div>

<div id="outline-container-19" class="outline-2">
<h2 id="sec-19"><span class="section-number-2">19</span> LaTeX</h2>
<div class="outline-text-2" id="text-19">


<p>
Install AuxTeX from elpa.
</p>
</div>

</div>

<div id="outline-container-20" class="outline-2">
<h2 id="sec-20"><span class="section-number-2">20</span> ESS</h2>
<div class="outline-text-2" id="text-20">


<p>
Installed using elpa, but seems to need <code>require</code> to be called
explicitly.
</p>



<pre class="src src-elisp">(<span style="color: #a020f0;">condition-case</span> nil
    (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">ess-site</span>)
  (<span style="color: #ff0000; font-weight: bold;">error</span> (message <span style="color: #8b2252;">"** could not load ESS"</span>)))
</pre>


<p>
Hooks
</p>



<pre class="src src-elisp">(add-hook 'ess-mode-hook
          '(<span style="color: #a020f0;">lambda</span>()
             (message <span style="color: #8b2252;">"Loading ess-mode hooks"</span>)
             <span style="color: #b22222;">;; </span><span style="color: #b22222;">leave my underscore key alone!</span>
             (setq ess-S-assign <span style="color: #8b2252;">"_"</span>)
             <span style="color: #b22222;">;; </span><span style="color: #b22222;">(ess-toggle-underscore nil)</span>
             <span style="color: #b22222;">;; </span><span style="color: #b22222;">set ESS indentation style</span>
             <span style="color: #b22222;">;; </span><span style="color: #b22222;">choose from GNU, BSD, K&amp;R, CLB, and C++</span>
             (ess-set-style 'GNU 'quiet)
             (flyspell-mode)
             )
          )
</pre>


</div>

</div>

<div id="outline-container-21" class="outline-2">
<h2 id="sec-21"><span class="section-number-2">21</span> org-mode</h2>
<div class="outline-text-2" id="text-21">


<p>
org-mode hooks
</p>



<pre class="src src-elisp">(add-hook 'org-mode-hook
          '(<span style="color: #a020f0;">lambda</span> ()
             (message <span style="color: #8b2252;">"Loading org-mode hooks"</span>)
             (turn-on-font-lock)
             (define-key org-mode-map (kbd <span style="color: #8b2252;">"M-&lt;right&gt;"</span>) 'forward-word)
             (define-key org-mode-map (kbd <span style="color: #8b2252;">"M-&lt;left&gt;"</span>) 'backward-word)
             <span style="color: #b22222;">;; </span><span style="color: #b22222;">provides key mapping for the above; replaces default</span>
             <span style="color: #b22222;">;; </span><span style="color: #b22222;">key bindings for org-promote/demote-subtree</span>
             (define-key org-mode-map (kbd <span style="color: #8b2252;">"M-S-&lt;right&gt;"</span>) 'org-do-demote)
             (define-key org-mode-map (kbd <span style="color: #8b2252;">"M-S-&lt;left&gt;"</span>) 'org-do-promote)
             (org-indent-mode)
             (visual-line-mode)
             <span style="color: #b22222;">;; </span><span style="color: #b22222;">org-babel</span>
             (org-babel-do-load-languages
              'org-babel-load-languages
              '((R . t)
                (latex . t)
                (python . t)
                (sh . t)
                (sql . t)
                (sqlite . t)
                (pygment . t)
                ))
             )
          )

(custom-set-variables
 '(org-confirm-babel-evaluate nil)
 '(org-src-fontify-natively t))

(setq org-agenda-files (list <span style="color: #8b2252;">"~/Dropbox/notes/index.org"</span>
                             <span style="color: #8b2252;">"~/Dropbox/fredross/notes/plans.org"</span>
                             ))

(push '(<span style="color: #8b2252;">"\\.org\\'"</span> . org-mode) auto-mode-alist)
(push '(<span style="color: #8b2252;">"\\.org\\.txt\\'"</span> . org-mode) auto-mode-alist)
</pre>



</div>

<div id="outline-container-21-1" class="outline-3">
<h3 id="sec-21-1"><span class="section-number-3">21.1</span> pygments</h3>
<div class="outline-text-3" id="text-21-1">


<p>
Syntax highlighting using <code>pygments</code> (<a href="http://pygments.org/">http://pygments.org/</a>).
</p>
<p>
<a href="http://oompiller.wordpress.com/2011/07/05/syntax-highlighting-using-pygment-in-org-mode/">http://oompiller.wordpress.com/2011/07/05/syntax-highlighting-using-pygment-in-org-mode/</a>
</p>
<p>
Install with
</p>
<pre class="example">
cd ~/.emacs.d
wget https://raw.github.com/jianingy/org-babel-plugins/master/ob-pygment.el
</pre>


<p>
Requires <code>(setq org-babel-load-languages (quote (pygment . t)))</code> above
</p>



<pre class="src src-elisp">(<span style="color: #a020f0;">condition-case</span> nil
    (<span style="color: #a020f0;">progn</span>
      (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">ob-pygment</span>)
      (setq org-pygment-path <span style="color: #8b2252;">"/usr/local/bin/pygmentize"</span>))
  (<span style="color: #ff0000; font-weight: bold;">error</span> (message <span style="color: #8b2252;">"** could not load ob-pygment"</span>)))
</pre>


</div>

</div>

<div id="outline-container-21-2" class="outline-3">
<h3 id="sec-21-2"><span class="section-number-3">21.2</span> org-mode utilities</h3>
<div class="outline-text-3" id="text-21-2">





<pre class="src src-elisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">insert-date</span> ()
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Insert today's timestamp in format "&lt;%Y-%m-%d %a&gt;"</span>
  (interactive)
  (insert (format-time-string <span style="color: #8b2252;">"&lt;%Y-%m-%d %a&gt;"</span>)))
(global-set-key (kbd <span style="color: #8b2252;">"C-c d"</span>) 'insert-date)
</pre>



<pre class="src src-elisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">org-add-entry</span> (filename time-format)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Add an entry to an org-file with today's timestamp.</span>
  (interactive <span style="color: #8b2252;">"FFile: "</span>)
  (find-file filename)
  (end-of-buffer)
  (delete-blank-lines)
  <span style="color: #b22222;">;;</span><span style="color: #b22222;">(insert "\n* ")</span>
  (insert (format-time-string time-format))
  (beginning-of-line)
  (forward-char 2))
</pre>


<p>
Add a new entry to main notes file.
</p>



<pre class="src src-elisp">(global-set-key
 (kbd <span style="color: #8b2252;">"C-x C-n"</span>) (<span style="color: #a020f0;">lambda</span> () (interactive)
                   (org-add-entry <span style="color: #8b2252;">"~/Dropbox/notes/index.org"</span>
                                  <span style="color: #8b2252;">"\n* &lt;%Y-%m-%d %a&gt;"</span>)))
</pre>


<p>
Add an entry to todo file.
</p>



<pre class="src src-elisp">(global-set-key
 (kbd <span style="color: #8b2252;">"C-x C-m"</span>) (<span style="color: #a020f0;">lambda</span> () (interactive)
                   (org-add-entry <span style="color: #8b2252;">"~/Dropbox/notes/todo.org"</span>
                                  <span style="color: #8b2252;">"\n** TODO &lt;%Y-%m-%d %a&gt;"</span>)))
</pre>


</div>
</div>

</div>

<div id="outline-container-22" class="outline-2">
<h2 id="sec-22"><span class="section-number-2">22</span> markdown</h2>
<div class="outline-text-2" id="text-22">


<p>
Installed using elpa.
</p>



<pre class="src src-elisp">(push '(<span style="color: #8b2252;">"\\.md"</span> . markdown-mode) auto-mode-alist)
</pre>


</div>

</div>

<div id="outline-container-23" class="outline-2">
<h2 id="sec-23"><span class="section-number-2">23</span> chrome "edit with emacs"</h2>
<div class="outline-text-2" id="text-23">


<p>
'edit-server' is initialized by elpa, but we need to start the server.
</p>



<pre class="src src-elisp">(<span style="color: #a020f0;">condition-case</span> nil
    (edit-server-start)
  (<span style="color: #ff0000; font-weight: bold;">error</span> (message <span style="color: #8b2252;">"** could not start edit-server (chrome edit with emacs)"</span>)))
</pre>


</div>

</div>

<div id="outline-container-24" class="outline-2">
<h2 id="sec-24"><span class="section-number-2">24</span> Python</h2>
<div class="outline-text-2" id="text-24">


<ul>
<li><a href="http://jesselegg.com/archives/2010/02/25/emacs-python-programmers-part-1/">http://jesselegg.com/archives/2010/02/25/emacs-python-programmers-part-1/</a>
</li>
</ul>


<p>
Hooks
</p>



<pre class="src src-elisp">(add-hook 'python-mode-hook
          '(<span style="color: #a020f0;">lambda</span> ()
             (message <span style="color: #8b2252;">"Loading python-mode hooks"</span>)
             (setq indent-tabs-mode nil)
             (setq tab-width 4)
             (setq py-indent-offset tab-width)
             (setq py-smart-indentation t)
             (define-key python-mode-map <span style="color: #8b2252;">"\C-m"</span> 'newline-and-indent)
             <span style="color: #b22222;">;; </span><span style="color: #b22222;">(hs-minor-mode)</span>
             <span style="color: #b22222;">;; </span><span style="color: #b22222;">add function index to menu bar</span>
             <span style="color: #b22222;">;; </span><span style="color: #b22222;">(imenu-add-menubar-index)</span>
             <span style="color: #b22222;">;; </span><span style="color: #b22222;">(python-mode-untabify)</span>
             <span style="color: #b22222;">;; </span><span style="color: #b22222;">(linum-mode)</span>
             )
          )
</pre>


<p>
File name mappings
</p>



<pre class="src src-elisp">(push '(<span style="color: #8b2252;">"SConstruct"</span> . python-mode) auto-mode-alist)
(push '(<span style="color: #8b2252;">"SConscript"</span> . python-mode) auto-mode-alist)
(push '(<span style="color: #8b2252;">"*.cgi"</span> . python-mode) auto-mode-alist)
</pre>


<p>
Default 'untabify converts a tab to equivalent number of spaces before
deleting a single character.
</p>



<pre class="src src-elisp">(setq backward-delete-char-untabify-method <span style="color: #8b2252;">"all"</span>)
</pre>


</div>

</div>

<div id="outline-container-25" class="outline-2">
<h2 id="sec-25"><span class="section-number-2">25</span> python-pylint</h2>
<div class="outline-text-2" id="text-25">


<p>
Installed using ELPA.
</p>
<p>
Invoke with <code>M-x python-pylint RET</code>
</p>
</div>

</div>

<div id="outline-container-26" class="outline-2">
<h2 id="sec-26"><span class="section-number-2">26</span> text-mode</h2>
<div class="outline-text-2" id="text-26">





<pre class="src src-elisp">(add-hook 'text-mode-hook
          '(<span style="color: #a020f0;">lambda</span> ()
             <span style="color: #b22222;">;; </span><span style="color: #b22222;">(longlines-mode)</span>
             (flyspell-mode)
             )
          )
</pre>


</div>

</div>

<div id="outline-container-27" class="outline-2">
<h2 id="sec-27"><span class="section-number-2">27</span> rst-mode</h2>
<div class="outline-text-2" id="text-27">





<pre class="src src-elisp">(add-hook 'rst-mode-hook
          '(<span style="color: #a020f0;">lambda</span> ()
             (message <span style="color: #8b2252;">"Loading rst-mode hooks"</span>)
             (flyspell-mode)
             (define-key rst-mode-map (kbd <span style="color: #8b2252;">"C-c C-a"</span>) 'rst-adjust)
             )
          )
</pre>


</div>

</div>

<div id="outline-container-28" class="outline-2">
<h2 id="sec-28"><span class="section-number-2">28</span> tramp</h2>
<div class="outline-text-2" id="text-28">


<ul>
<li><a href="http://www.gnu.org/software/tramp/">http://www.gnu.org/software/tramp/</a>
</li>
</ul>





<pre class="src src-elisp">(<span style="color: #a020f0;">condition-case</span> nil
    (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">tramp</span>)
  (setq tramp-default-method <span style="color: #8b2252;">"scp"</span>)
  (<span style="color: #ff0000; font-weight: bold;">error</span> (message <span style="color: #8b2252;">"** could not load tramp"</span>)))
</pre>


</div>

</div>

<div id="outline-container-29" class="outline-2">
<h2 id="sec-29"><span class="section-number-2">29</span> ibuffer</h2>
<div class="outline-text-2" id="text-29">


<ul>
<li><a href="http://emacs-fu.blogspot.com/2010/02/dealing-with-many-buffers-ibuffer.html">http://emacs-fu.blogspot.com/2010/02/dealing-with-many-buffers-ibuffer.html</a>
</li>
</ul>





<pre class="src src-elisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">ibuffer</span>)
(global-set-key (kbd <span style="color: #8b2252;">"C-x C-g"</span>) 'ibuffer)
(global-set-key (kbd <span style="color: #8b2252;">"C-x M-g"</span>) 'ibuffer-switch-to-saved-filter-groups)
(setq ibuffer-show-empty-filter-groups nil)
</pre>


<p>
Function to load config file. Load on starup.
</p>



<pre class="src src-elisp">(setq ibuffer-config-file <span style="color: #8b2252;">"~/.emacs.d/ibuffer-config.el"</span>)

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">ibuffer-load-config</span> ()
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">load the ibuffer config file</span>
  (interactive)
  (<span style="color: #a020f0;">condition-case</span> nil
      (<span style="color: #a020f0;">progn</span>
        (message (format <span style="color: #8b2252;">"** loading ibuffer config in %s"</span> ibuffer-config-file))
        (load ibuffer-config-file)
        )
    (<span style="color: #ff0000; font-weight: bold;">error</span> (message (format <span style="color: #8b2252;">"** could not load %s"</span> ibuffer-config-file))))
  )

(ibuffer-load-config)
</pre>


<p>
Show/hide all filter groups
</p>



<pre class="src src-elisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">ibuffer-show-all-filter-groups</span> ()
  <span style="color: #8b2252;">"Show all filter groups"</span>
  (interactive)
  (setq ibuffer-hidden-filter-groups nil)
  (ibuffer-update nil t))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">ibuffer-hide-all-filter-groups</span> ()
  <span style="color: #8b2252;">"Hide all filter groups"</span>
  (interactive)
  (setq ibuffer-hidden-filter-groups
        (delete-dups
         (append ibuffer-hidden-filter-groups
                 (mapcar 'car (ibuffer-generate-filter-groups
                               (ibuffer-current-state-list)
                               (not ibuffer-show-empty-filter-groups)
                               t)))))
  (ibuffer-update nil t))
</pre>



<pre class="src src-elisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">ibuffer-reload</span> ()
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">kill ibuffer, reload the config file, and return to ibuffer</span>
  (interactive)
  (ibuffer)
  (kill-buffer)
  (ibuffer-load-config)
  (ibuffer)
  )
</pre>



<p>
From <a href="http://www.emacswiki.org/emacs/IbufferMode">http://www.emacswiki.org/emacs/IbufferMode</a>
</p>



<pre class="src src-elisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">my-ibuffer-sort-hook</span> ()
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">add another sorting method for ibuffer (allow the grouping of</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">filenames and dired buffers</span>
  (define-ibuffer-sorter filename-or-dired
    <span style="color: #8b2252;">"Sort the buffers by their pathname."</span>
    (<span style="color: #483d8b;">:description</span> <span style="color: #8b2252;">"filenames plus dired"</span>)
    (string-lessp
     (<span style="color: #a020f0;">with-current-buffer</span> (car a)
       (or buffer-file-name
           (<span style="color: #a020f0;">if</span> (eq major-mode 'dired-mode)
               (expand-file-name dired-directory))
           <span style="color: #b22222;">;; </span><span style="color: #b22222;">so that all non pathnames are at the end</span>
           <span style="color: #8b2252;">"~"</span>))
     (<span style="color: #a020f0;">with-current-buffer</span> (car b)
       (or buffer-file-name
           (<span style="color: #a020f0;">if</span> (eq major-mode 'dired-mode)
               (expand-file-name dired-directory))
           <span style="color: #b22222;">;; </span><span style="color: #b22222;">so that all non pathnames are at the end</span>
           <span style="color: #8b2252;">"~"</span>))))
  (define-key ibuffer-mode-map (kbd <span style="color: #8b2252;">"s p"</span>)     'ibuffer-do-sort-by-filename-or-dired)
  )
</pre>


<p>
From <a href="http://curiousprogrammer.wordpress.com/2009/04/02/ibuffer/">http://curiousprogrammer.wordpress.com/2009/04/02/ibuffer/</a>
</p>



<pre class="src src-elisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">ibuffer-ediff-marked-buffers</span> ()
  <span style="color: #8b2252;">"Compare two marked buffers using ediff"</span>
  (interactive)
  (<span style="color: #a020f0;">let*</span> ((marked-buffers (ibuffer-get-marked-buffers))
         (len (length marked-buffers)))
    (<span style="color: #a020f0;">unless</span> (= 2 len)
      (<span style="color: #ff0000; font-weight: bold;">error</span> (format <span style="color: #8b2252;">"%s buffer%s been marked (needs to be 2)"</span>
                     len (<span style="color: #a020f0;">if</span> (= len 1) <span style="color: #8b2252;">" has"</span> <span style="color: #8b2252;">"s have"</span>))))
    (ediff-buffers (car marked-buffers) (cadr marked-buffers))))
</pre>


<p>
Hooks
</p>



<pre class="src src-elisp">(add-hook 'ibuffer-mode-hook
          '(<span style="color: #a020f0;">lambda</span> ()
             (ibuffer-auto-mode 1) <span style="color: #b22222;">;; </span><span style="color: #b22222;">minor mode that keeps the buffer list up to date</span>
             (ibuffer-switch-to-saved-filter-groups <span style="color: #8b2252;">"default"</span>)
             (define-key ibuffer-mode-map (kbd <span style="color: #8b2252;">"a"</span>) 'ibuffer-show-all-filter-groups)
             (define-key ibuffer-mode-map (kbd <span style="color: #8b2252;">"z"</span>) 'ibuffer-hide-all-filter-groups)
             (define-key ibuffer-mode-map (kbd <span style="color: #8b2252;">"e"</span>) 'ibuffer-ediff-marked-buffers)
             (my-ibuffer-sort-hook)
             )
          )
</pre>


</div>

</div>

<div id="outline-container-30" class="outline-2">
<h2 id="sec-30"><span class="section-number-2">30</span> dired</h2>
<div class="outline-text-2" id="text-30">


<p>
Omit uninteresting files.
</p>
<ul>
<li><a href="http://www.gnu.org/software/emacs/manual/html_node/dired-x/Omitting-Files-in-Dired.html">http://www.gnu.org/software/emacs/manual/html_node/dired-x/Omitting-Files-in-Dired.html</a>
</li>
</ul>





<pre class="src src-elisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">(add-hook 'dired-load-hook</span>
<span style="color: #b22222;">;;           </span><span style="color: #b22222;">(lambda ()</span>
<span style="color: #b22222;">;;             </span><span style="color: #b22222;">(load "dired-x")</span>
<span style="color: #b22222;">;;             </span><span style="color: #b22222;">))</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(add-hook 'dired-mode-hook</span>
<span style="color: #b22222;">;;           </span><span style="color: #b22222;">(lambda ()</span>
<span style="color: #b22222;">;;             </span><span style="color: #b22222;">;; Set dired-x buffer-local variables here.</span>
<span style="color: #b22222;">;;             </span><span style="color: #b22222;">(dired-omit-mode 1)</span>
<span style="color: #b22222;">;;             </span><span style="color: #b22222;">(setq dired-omit-extensions '(".pyc" ".git/"))</span>
<span style="color: #b22222;">;;             </span><span style="color: #b22222;">))</span>
</pre>


</div>

</div>

<div id="outline-container-31" class="outline-2">
<h2 id="sec-31"><span class="section-number-2">31</span> uniquify</h2>
<div class="outline-text-2" id="text-31">


<ul>
<li><a href="http://www.emacswiki.org/emacs/uniquify">http://www.emacswiki.org/emacs/uniquify</a>
</li>
</ul>





<pre class="src src-elisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">uniquify</span>)
</pre>


</div>

</div>

<div id="outline-container-32" class="outline-2">
<h2 id="sec-32"><span class="section-number-2">32</span> ido-mode</h2>
<div class="outline-text-2" id="text-32">


<ul>
<li><a href="http://www.masteringemacs.org/articles/2010/10/10/introduction-to-ido-mode/">http://www.masteringemacs.org/articles/2010/10/10/introduction-to-ido-mode/</a>
</li>
</ul>





<pre class="src src-elisp">(setq ido-enable-flex-matching t)
(setq ido-everywhere t)
(setq ido-use-virtual-buffers t)
(ido-mode 1)
</pre>


<p>
use recentf with ido - see <a href="http://wikemacs.org/wiki/Recentf">http://wikemacs.org/wiki/Recentf</a>
</p>



<pre class="src src-elisp">(recentf-mode 1)
(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">ido-choose-from-recentf</span> ()
  <span style="color: #8b2252;">"Use ido to select a recently visited file from the `</span><span style="color: #8b2252;">recentf-list</span><span style="color: #8b2252;">'"</span>
  (interactive)
  (find-file (ido-completing-read <span style="color: #8b2252;">"Open file: "</span> recentf-list nil t)))
(global-set-key (kbd <span style="color: #8b2252;">"C-c f"</span>) 'ido-choose-from-recentf)
</pre>


</div>

</div>

<div id="outline-container-33" class="outline-2">
<h2 id="sec-33"><span class="section-number-2">33</span> git/magit</h2>
<div class="outline-text-2" id="text-33">





<pre class="src src-elisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">vc-git</span>)
</pre>


<p>
Magit is installed via ELPA.
</p>



<pre class="src src-elisp">(global-set-key (kbd <span style="color: #8b2252;">"C-c m"</span>) 'magit-status)
</pre>


</div>

</div>

<div id="outline-container-34" class="outline-2">
<h2 id="sec-34"><span class="section-number-2">34</span> sql support</h2>
<div class="outline-text-2" id="text-34">


<ul>
<li>see <a href="http://atomized.org/2008/10/enhancing-emacs’-sql-mode/">http://atomized.org/2008/10/enhancing-emacs%E2%80%99-sql-mode/</a>
</li>
</ul>


<p>
Use sqlite3
</p>



<pre class="src src-elisp">(setq sql-sqlite-program <span style="color: #8b2252;">"sqlite3"</span>)
</pre>


<p>
Preset connections
</p>



<pre class="src src-elisp">(setq sql-connection-alist
      '((filemaker-sps
         (sql-product 'mysql)
         (sql-server <span style="color: #8b2252;">"1.2.3.4"</span>)
         (sql-user <span style="color: #8b2252;">"me"</span>)
         (sql-password <span style="color: #8b2252;">"mypassword"</span>)
         (sql-database <span style="color: #8b2252;">"thedb"</span>)
         (sql-port 3307))))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">sql-connect-preset</span> (name)
  <span style="color: #8b2252;">"Connect to a predefined SQL connection listed in `</span><span style="color: #8b2252;">sql-connection-alist</span><span style="color: #8b2252;">'"</span>
  (eval `(<span style="color: #a020f0;">let</span> ,(cdr (assoc name sql-connection-alist))
    (<span style="color: #a020f0;">flet</span> ((sql-get-login (<span style="color: #228b22;">&amp;rest</span> what)))
      (sql-product-interactive sql-product)))))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">sql-mastermu</span> ()
  (interactive)
  (sql-connect-preset 'mastermu))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">buffer naming</span>
(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">sql-make-smart-buffer-name</span> ()
  <span style="color: #8b2252;">"Return a string that can be used to rename a SQLi buffer.</span>
<span style="color: #8b2252;">This is used to set `</span><span style="color: #8b2252;">sql-alternate-buffer-name</span><span style="color: #8b2252;">' within</span>
<span style="color: #8b2252;">`</span><span style="color: #8b2252;">sql-interactive-mode</span><span style="color: #8b2252;">'."</span>
  (or (and (boundp 'sql-name) sql-name)
      (concat (<span style="color: #a020f0;">if</span> (not(string= <span style="color: #8b2252;">""</span> sql-server))
                  (concat
                   (or (and (string-match <span style="color: #8b2252;">"[0-9.]+"</span> sql-server) sql-server)
                       (car (split-string sql-server <span style="color: #8b2252;">"\\."</span>)))
                   <span style="color: #8b2252;">"/"</span>))
              sql-database)))

(add-hook 'sql-interactive-mode-hook
          (<span style="color: #a020f0;">lambda</span> ()
            (setq sql-alternate-buffer-name (sql-make-smart-buffer-name))
            (sql-rename-buffer)))
</pre>


</div>

</div>

<div id="outline-container-35" class="outline-2">
<h2 id="sec-35"><span class="section-number-2">35</span> gpg</h2>
<div class="outline-text-2" id="text-35">


<ul>
<li><a href="http://www.emacswiki.org/emacs/EasyPG">http://www.emacswiki.org/emacs/EasyPG</a>
</li>
</ul>





<pre class="src src-elisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">epa-file</span>)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(epa-file-enable)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">suppress graphical passphrase prompt</span>
(setenv <span style="color: #8b2252;">"GPG_AGENT_INFO"</span> nil)
</pre>


</div>

</div>

<div id="outline-container-36" class="outline-2">
<h2 id="sec-36"><span class="section-number-2">36</span> wc</h2>
<div class="outline-text-2" id="text-36">


<p>
From <a href="http://emacswiki.org/emacs/wc.el">http://emacswiki.org/emacs/wc.el</a>
</p>
<p>
To install:
</p>
<pre class="example">
cd ~/.emacs.d
wget http://www.emacswiki.org/emacs/download/wc.el
</pre>





<pre class="src src-elisp">(<span style="color: #a020f0;">condition-case</span> nil
    (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">wc</span>)
      (<span style="color: #ff0000; font-weight: bold;">error</span> (message <span style="color: #8b2252;">"** could not load wc.el"</span>)))

</pre>


</div>

</div>

<div id="outline-container-37" class="outline-2">
<h2 id="sec-37"><span class="section-number-2">37</span> Misc utilities</h2>
<div class="outline-text-2" id="text-37">


</div>

<div id="outline-container-37-1" class="outline-3">
<h3 id="sec-37-1"><span class="section-number-3">37.1</span> copy-buffer-file-name</h3>
<div class="outline-text-3" id="text-37-1">





<pre class="src src-elisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">copy-buffer-file-name</span> ()
  <span style="color: #8b2252;">"Add `</span><span style="color: #8b2252;">buffer-file-name</span><span style="color: #8b2252;">' to `</span><span style="color: #8b2252;">kill-ring</span><span style="color: #8b2252;">'"</span>
  (interactive)
  (kill-new buffer-file-name t)
)
</pre>


</div>

</div>

<div id="outline-container-37-2" class="outline-3">
<h3 id="sec-37-2"><span class="section-number-3">37.2</span> copy-and-comment</h3>
<div class="outline-text-3" id="text-37-2">





<pre class="src src-elisp">(fset 'copy-and-comment
   <span style="color: #8b2252;">"\367\C-x\C-x\273"</span>)
(global-set-key (kbd <span style="color: #8b2252;">"M-C-;"</span>) 'copy-and-comment)
</pre>


</div>

</div>

<div id="outline-container-37-3" class="outline-3">
<h3 id="sec-37-3"><span class="section-number-3">37.3</span> get-buffer-file-name</h3>
<div class="outline-text-3" id="text-37-3">





<pre class="src src-elisp">(fset 'get-buffer-file-name
   <span style="color: #8b2252;">"\C-hvbuffer-file-name\C-m"</span>)
</pre>


</div>

</div>

<div id="outline-container-37-4" class="outline-3">
<h3 id="sec-37-4"><span class="section-number-3">37.4</span> unfill-paragraph</h3>
<div class="outline-text-3" id="text-37-4">


<p>
from <a href="http://defindit.com/readme_files/emacs_hints_tricks.html">http://defindit.com/readme_files/emacs_hints_tricks.html</a>
</p>



<pre class="src src-elisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">unfill-paragraph</span> ()
  (interactive)
  (<span style="color: #a020f0;">let</span> ((fill-column (point-max)))
  (fill-paragraph nil)))
(global-set-key (kbd <span style="color: #8b2252;">"M-C-q"</span>) 'unfill-paragraph)
</pre>


</div>
</div>

</div>

<div id="outline-container-38" class="outline-2">
<h2 id="sec-38"><span class="section-number-2">38</span> emacsclient</h2>
<div class="outline-text-2" id="text-38">


<p>
Buffers opened from command line don't create new frame
</p>



<pre class="src src-elisp">(setq ns-pop-up-frames nil)
</pre>


</div>

</div>

<div id="outline-container-39" class="outline-2">
<h2 id="sec-39"><span class="section-number-2">39</span> added by emacs</h2>
<div class="outline-text-2" id="text-39">





<pre class="src src-elisp"><span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">content below was added by emacs ;;;;;;</span>
<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
(put 'downcase-region 'disabled nil)
(put 'upcase-region 'disabled nil)
(put 'narrow-to-region 'disabled nil)
(custom-set-variables
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">custom-set-variables was added by Custom.</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">If you edit it by hand, you could mess it up, so be careful.</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Your init file should contain only one such instance.</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">If there is more than one, they won't work right.</span>
 '(safe-local-variable-values (quote ((toggle-read-only . t))))
 '(uniquify-buffer-name-style (quote post-forward) nil (uniquify)))
(custom-set-faces
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">custom-set-faces was added by Custom.</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">If you edit it by hand, you could mess it up, so be careful.</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Your init file should contain only one such instance.</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">If there is more than one, they won't work right.</span>
 )
</pre>

</div>
</div>
</div>

</body>
</html>
